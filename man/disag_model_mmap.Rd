% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fitting.R
\name{disag_model_mmap}
\alias{disag_model_mmap}
\title{Fit a multi-map disaggregation model (via AGHQ, TMB, or MCMC)}
\usage{
disag_model_mmap(
  data,
  priors = NULL,
  family = "poisson",
  link = "log",
  engine = c("AGHQ", "TMB", "MCMC"),
  time_varying_betas = FALSE,
  engine.args = NULL,
  aghq_k = 2,
  field = TRUE,
  iid = TRUE,
  silent = TRUE,
  starting_values = NULL,
  optimizer = NULL,
  verbose = FALSE,
  ...
)
}
\arguments{
\item{data}{A \code{disag_data_mmap} object.}

\item{priors}{Optional named list of prior overrides.}

\item{family}{One of \code{"gaussian"}, \code{"binomial"}, \code{"poisson"}, or \code{"negbinomial"}.}

\item{link}{One of \code{"identity"}, \code{"logit"}, or \code{"log"}.}

\item{engine}{Character; one of \code{"AGHQ"}, \code{"TMB"}, or \code{"MCMC"}.}

\item{time_varying_betas}{Logical; if TRUE, each time point has its own fixed-effect.}

\item{engine.args}{Optional named list of engine-specific options.
Supported keys:
\itemize{
  \item AGHQ: \code{aghq_k}, \code{optimizer}
  \item TMB: \code{iterations}, \code{hess_control_parscale}, \code{hess_control_ndeps}
  \item MCMC: commonly used \code{tmbstan} controls such as
    \code{chains}, \code{iter}, \code{warmup}, \code{thin}, \code{cores},
    \code{seed}, \code{laplace}, \code{debug}, \code{silent},
    \code{lower}, and \code{upper}. Extra named keys are passed through
    to \code{tmbstan::tmbstan()}.
}}

\item{aghq_k}{Deprecated at wrapper level; use \code{engine.args = list(aghq_k = ...)}.
Retained for backward compatibility.}

\item{field}{Logical; include spatial field?}

\item{iid}{Logical; include IID polygon effects?}

\item{silent}{Logical; pass through to engine fit function.}

\item{starting_values}{Optional named list of starting values.}

\item{optimizer}{Deprecated at wrapper level; use
\code{engine.args = list(optimizer = ...)}. Retained for backward compatibility.}

\item{verbose}{Logical; print runtime diagnostics.}

\item{...}{Additional arguments. Engine-specific arguments passed via \code{...}
are deprecated in this wrapper and should be moved to \code{engine.args}.}
}
\value{
A fitted model object of class \code{disag_model_mmap_tmb},
  \code{disag_model_mmap_aghq}, or \code{disag_model_mmap_mcmc}
  (all also inherit \code{disag_model_mmap}).
}
\description{
Top-level fitting wrapper with engine dispatch and engine-specific argument
handling. Engine-specific controls should be supplied via \code{engine.args}.
}
